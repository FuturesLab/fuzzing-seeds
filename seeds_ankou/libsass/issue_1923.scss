%btnBase {
  display: none;
}

@mixin mobile {
  @media only screen and (min-width:300px) {
    @content;
  }
}

@include mobile {
  a {
    @extend %btnBase;
  }
}
<===> error
Error: You may not @extend an outer selector from within @media.
       You may only @extend selectors within the same directive.
input.scss.
input.scss
  Use --trace for backtrace.
